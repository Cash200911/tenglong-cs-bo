<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è…¾é¾™å¨±ä¹å®¢æœ</title>
    <style>
        :root {
            --primary-color: #e74c3c;
            --primary-dark: #c0392b;
            --primary-light: #f9ebea;
            --accent-color: #f1c40f;
            --text-color: #333333;
            --text-light: #757575;
            --bg-color: #FFFFFF;
            --bg-light: #F5F5F5;
            --border-color: #E0E0E0;
            --success-color: #4CAF50;
            --warning-color: #FFC107;
            --error-color: #F44336;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Roboto', 'Arial', sans-serif;
        }

        body {
            font-size: 16px;
            line-height: 1.5;
            color: var(--text-color);
        }

        /* èŠå¤©æœºå™¨äººå®¹å™¨ */
        #chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            width: 360px;
            max-width: calc(100vw - 40px);
            box-shadow: 0 5px 40px rgba(0, 0, 0, 0.16);
            border-radius: 16px;
            overflow: hidden;
            transition: all 0.3s ease;
            background-color: var(--bg-color);
        }

        /* æœ€å°åŒ–çŠ¶æ€ */
        #chatbot-container.minimized {
            width: 60px;
            height: 60px;
            border-radius: 30px;
        }

        /* èŠå¤©å¤´éƒ¨ */
        .chat-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            cursor: pointer;
        }

        .chat-header h3 {
            font-size: 18px;
            font-weight: 500;
        }

        .chat-header-buttons {
            display: flex;
            gap: 8px;
        }

        .chat-header-button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s;
        }

        .chat-header-button:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        /* èŠå¤©å†…å®¹åŒºåŸŸ */
        .chat-body {
            height: 300px;
            overflow-y: auto;
            padding: 16px;
            background-color: var(--bg-light);
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        .chat-body::-webkit-scrollbar {
            width: 6px;
        }

        .chat-body::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-body::-webkit-scrollbar-thumb {
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 3px;
        }

        /* æ¶ˆæ¯æ ·å¼ */
        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            word-wrap: break-word;
        }

        .bot-message {
            align-self: flex-start;
            background-color: white;
            border: 1px solid var(--border-color);
            border-bottom-left-radius: 4px;
        }

        .user-message {
            align-self: flex-end;
            background-color: var(--primary-color);
            color: white;
            border-bottom-right-radius: 4px;
        }

        /* å¿«æ·å›å¤æŒ‰é’® */
        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .quick-reply-btn {
            background-color: white;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 8px 12px;
            border-radius: 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-reply-btn:hover {
            background-color: var(--primary-light);
        }

        /* èŠå¤©è¾“å…¥åŒºåŸŸ */
        .chat-footer {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            border-top: 1px solid var(--border-color);
            background-color: white;
        }

        .chat-input {
            flex: 1;
            border: none;
            outline: none;
            padding: 8px 0;
            font-size: 16px;
            resize: none;
            max-height: 100px;
            overflow-y: auto;
        }

        .chat-input::placeholder {
            color: var(--text-light);
        }

        .send-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-left: 8px;
        }

        .send-button:hover {
            background-color: var(--primary-dark);
        }

        .send-button:disabled {
            background-color: var(--border-color);
            cursor: not-allowed;
        }

        /* æœ€å°åŒ–æ—¶çš„åœ†å½¢æŒ‰é’® */
        .chat-bubble {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            position: relative;
        }

        .chat-bubble svg {
            width: 28px;
            height: 28px;
            fill: white;
        }

        /* æœªè¯»æ¶ˆæ¯æç¤º */
        .unread-indicator {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 20px;
            height: 20px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }

        /* æ‰“å­—æŒ‡ç¤ºå™¨ */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 16px;
            background-color: white;
            border-radius: 18px;
            align-self: flex-start;
            width: fit-content;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--text-light);
            border-radius: 50%;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.6;
            }
            30% {
                transform: translateY(-4px);
                opacity: 1;
            }
        }

        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 480px) {
            #chatbot-container {
                width: 100%;
                max-width: 100%;
                bottom: 0;
                right: 0;
                border-radius: 0;
            }

            #chatbot-container.minimized {
                width: 60px;
                height: 60px;
                bottom: 20px;
                right: 20px;
                border-radius: 30px;
            }
        }

        /* éšè—å…ƒç´  */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- èŠå¤©æœºå™¨äººå®¹å™¨ -->
    <div id="chatbot-container" class="minimized">
        <!-- æœ€å°åŒ–çŠ¶æ€æ˜¾ç¤ºçš„æ°”æ³¡ -->
        <div class="chat-bubble" id="chat-bubble">
            <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H5.2L4 17.2V4H20V16Z"/>
                <path d="M7 9H17V11H7V9Z"/>
                <path d="M7 12H14V14H7V12Z"/>
                <path d="M7 6H17V8H7V6Z"/>
            </svg>
            <div class="unread-indicator hidden">1</div>
        </div>

        <!-- å±•å¼€åçš„èŠå¤©ç•Œé¢ -->
        <div class="chat-header" id="chat-header">
            <h3>è…¾é¾™å¨±ä¹å®¢æœ</h3>
            <div class="chat-header-buttons">
                <button class="chat-header-button" id="minimize-btn">
                    <svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M19 13H5v-2h14v2z" fill="currentColor"/>
                    </svg>
                </button>
            </div>
        </div>

        <div class="chat-body" id="chat-body">
            <!-- æ¶ˆæ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
        </div>

        <div class="chat-footer">
            <input type="text" class="chat-input" id="chat-input" placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..." autocomplete="off">
            <button class="send-button" id="send-btn" disabled>
                <svg width="20" height="20" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" fill="currentColor"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // é—®ç­”æ•°æ®åº“
        const knowledgeBase = [
            {
                id: 1,
                keywords: ['ä½ å¥½', 'æ‚¨å¥½', 'å—¨', 'hi', 'hello',  'åœ¨çº¿','åœ¨å—',],
                questions: ['ä½ å¥½', 'æ‚¨å¥½', 'å—¨','åœ¨å—', ],
                answer: 'æ‚¨å¥½ï¼æˆ‘æ˜¯è…¾é¾™å¨±ä¹å®¢æœåŠ©ç†ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚è¯·é—®æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ',
                category: 'é—®å€™',
                followUp: [2, 3, 4]
            },
            {
                id: 2,
                keywords: ['å…¬å¸', 'ä¼ä¸š', 'å…³äº', 'ç®€ä»‹', 'ä»‹ç»', 'æ˜¯ä»€ä¹ˆ', 'åšä»€ä¹ˆ'],
                questions: ['è…¾é¾™å¨±ä¹æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ', 'å…¬å¸ç®€ä»‹', 'ä»‹ç»ä¸€ä¸‹è…¾é¾™å¨±ä¹', 'ä½ ä»¬æ˜¯å¹²ä»€ä¹ˆçš„'],
                answer: 'è…¾é¾™å¨±ä¹æ˜¯ä¸€å®¶ä¸“ä¸šçš„åœ¨çº¿å¨±ä¹å¹³å°ï¼Œæä¾›å¤šç§æ¸¸æˆå’Œå¨±ä¹æœåŠ¡ã€‚æˆ‘ä»¬è‡´åŠ›äºä¸ºç”¨æˆ·æä¾›å®‰å…¨ã€å…¬å¹³ã€æœ‰è¶£çš„å¨±ä¹ä½“éªŒã€‚',
                category: 'å…¬å¸ä¿¡æ¯',
                followUp: [5, 6]
            },
            {
                id: 3,
                keywords: ['æ¸¸æˆ', 'ç©æ³•', 'ç§ç±»', 'é¡¹ç›®', 'æœ‰ä»€ä¹ˆ'],
                questions: ['æœ‰å“ªäº›æ¸¸æˆå¯ä»¥ç©ï¼Ÿ', 'æä¾›ä»€ä¹ˆæ¸¸æˆï¼Ÿ', 'æ¸¸æˆç§ç±»', 'æœ‰å“ªäº›å¨±ä¹é¡¹ç›®'],
                answer: 'è…¾é¾™å¨±ä¹æä¾›å¤šç§æ¸¸æˆç±»å‹ï¼ŒåŒ…æ‹¬ï¼š\n1. çœŸäººå¨±ä¹\n2. ä½“è‚²èµ›äº‹\n3. ç”µå­æ¸¸æˆ\n4. å½©ç¥¨æ¸¸æˆ\n5. æ£‹ç‰Œæ¸¸æˆ\n\næ‚¨å¯¹å“ªä¸€ç±»æ¸¸æˆæ„Ÿå…´è¶£ï¼Ÿæˆ‘å¯ä»¥æä¾›æ›´è¯¦ç»†çš„ä¿¡æ¯ã€‚',
                category: 'æ¸¸æˆæœåŠ¡',
                followUp: [7, 8, 9]
            },
            {
                id: 4,
                keywords: ['ä¼˜æƒ ', 'æ´»åŠ¨', 'ç¦åˆ©', 'å¥–é‡‘', 'å¥–åŠ±'],
                questions: ['æœ‰ä»€ä¹ˆä¼˜æƒ æ´»åŠ¨ï¼Ÿ', 'æœ€æ–°æ´»åŠ¨', 'ä¼˜æƒ æ”¿ç­–', 'å¥–é‡‘æ´»åŠ¨'],
                answer: 'è…¾é¾™å¨±ä¹ç›®å‰æœ‰å¤šç§ä¼˜æƒ æ´»åŠ¨ï¼š\n\n1. æ–°ç”¨æˆ·æ³¨å†Œé€ç¤¼é‡‘\n2. é¦–å……ä¼˜æƒ \n3. VIPä¼šå‘˜ä¸“å±ç¦åˆ©\n4. æ¯æ—¥ç­¾åˆ°å¥–åŠ±\n5. ç‰¹åˆ«èŠ‚æ—¥æ´»åŠ¨\n\nå…·ä½“æ´»åŠ¨è¯¦æƒ…å’Œè§„åˆ™ï¼ŒæŸ¥çœ‹ç½‘ç«™æ´»åŠ¨"https://tl33054.dpdns.org/"é¡µé¢ï¼Œæˆ–å’¨è¯¢åœ¨çº¿å®¢æœã€‚',
                category: 'ä¼˜æƒ æ´»åŠ¨',
                followUp: [10, 11]
            },
            {
                id: 5,
                keywords: ['è”ç³»', 'ç”µè¯', 'é‚®ç®±', 'å®¢æœ', 'å¾®ä¿¡', 'QQ'],
                questions: ['æ€ä¹ˆè”ç³»å®¢æœï¼Ÿ', 'è”ç³»æ–¹å¼', 'å®¢æœç”µè¯', 'é‚®ç®±åœ°å€'],
                answer: 'æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»æˆ‘ä»¬çš„å®¢æœå›¢é˜Ÿï¼š\n\nğŸ“ å®¢æœçƒ­çº¿ï¼š[09662348273]\nâœ‰ï¸ é‚®ç®±ï¼š[shixinqiangx@gmail.com]\nğŸ’¬ åœ¨çº¿å®¢æœï¼šç½‘ç«™å³ä¸‹è§’å¯¹è¯æ¡†\nâ° æœåŠ¡æ—¶é—´ï¼š7x24å°æ—¶å…¨å¤©å€™æœåŠ¡',
                category: 'è”ç³»æ–¹å¼',
                followUp: []
            },
            {
                id: 6,
                keywords: ['è´¦å·', 'æ³¨å†Œ', 'ç™»å½•', 'å¯†ç ', 'å¿˜è®°', 'é‡ç½®'],
                questions: ['æ€ä¹ˆæ³¨å†Œè´¦å·ï¼Ÿ', 'å¿˜è®°å¯†ç æ€ä¹ˆåŠ', 'æ— æ³•ç™»å½•', 'å¦‚ä½•ä¿®æ”¹å¯†ç '],
                answer: 'å…³äºè´¦å·é—®é¢˜ï¼š\n\n1. æ³¨å†Œï¼šç‚¹å‡»ç½‘ç«™å³ä¸Šè§’"æ³¨å†Œ"æŒ‰é’®ï¼Œå¡«å†™ä¿¡æ¯å³å¯\n2. å¿˜è®°å¯†ç ï¼šè”ç³»åœ¨çº¿å®¢æœå’¨è¯¢"å¿˜è®°å¯†ç "ï¼Œé€šè¿‡åœ¨çº¿å®¢æœé‡ç½®æ‚¨çš„è´¦å·å¯†ç \n3. ç™»å½•é—®é¢˜ï¼šè¯·ç¡®ä¿ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®ï¼Œæˆ–å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜\n\nå¦‚æœé—®é¢˜ä»æœªè§£å†³ï¼Œè¯·è”ç³»åœ¨çº¿å®¢æœè·å–å¸®åŠ©ã€‚',
                category: 'è´¦æˆ·ç®¡ç†',
                followUp: []
            },
            {
                id: 7,
                keywords: ['å……å€¼', 'å­˜æ¬¾', 'å…¥é‡‘', 'æ”¯ä»˜', 'æ€ä¹ˆå……'],
                questions: ['æ€ä¹ˆå……å€¼ï¼Ÿ', 'å¦‚ä½•å­˜æ¬¾', 'æ”¯æŒä»€ä¹ˆæ”¯ä»˜æ–¹å¼', 'æœ€ä½å……å€¼å¤šå°‘'],
                answer: 'è…¾é¾™å¨±ä¹æ”¯æŒå¤šç§å……å€¼æ–¹å¼ï¼š\n\n1. é“¶è¡Œå¡è½¬è´¦\n2. æ”¯ä»˜å®\n3. å¾®ä¿¡æ”¯ä»˜\n4. è™šæ‹Ÿå¸æ”¯ä»˜\n5. ç¬¬ä¸‰æ–¹æ”¯ä»˜\n\næœ€ä½å……å€¼é‡‘é¢ä¸º[10]å…ƒã€‚å……å€¼æ­¥éª¤ï¼šç™»å½•è´¦æˆ· â†’ ç‚¹å‡»"å……å€¼"æŒ‰é’® â†’ é€‰æ‹©æ”¯ä»˜æ–¹å¼ â†’ è¾“å…¥é‡‘é¢ â†’ å®Œæˆæ”¯ä»˜ã€‚\n\nå¦‚é‡å……å€¼é—®é¢˜ï¼Œè¯·è”ç³»åœ¨çº¿å®¢æœã€‚',
                category: 'å……å€¼',
                followUp: [12]
            },
            {
                id: 8,
                keywords: ['æç°', 'å–æ¬¾', 'å‡ºé‡‘', 'ææ¬¾', 'æ€ä¹ˆæ'],
                questions: ['æ€ä¹ˆæç°ï¼Ÿ', 'å¦‚ä½•å–æ¬¾', 'ææ¬¾åˆ°è´¦æ—¶é—´', 'æç°æ‰‹ç»­è´¹'],
                answer: 'å…³äºæç°ï¼š\n\n1. æç°æ­¥éª¤ï¼šç™»å½•è´¦æˆ· â†’ ç‚¹å‡»"æç°"æŒ‰é’® â†’ é€‰æ‹©æç°æ–¹å¼ â†’ è¾“å…¥é‡‘é¢ â†’ æäº¤ç”³è¯·\n2. å¤„ç†æ—¶é—´ï¼šæ­£å¸¸æƒ…å†µä¸‹1-3ä¸ªå·¥ä½œå°æ—¶å†…å¤„ç†å®Œæˆ\n3. æœ€ä½æç°é‡‘é¢ï¼š[ä¸çŸ¥]å…ƒ\n4. æ‰‹ç»­è´¹ï¼š[è´¹ç”¨è¯´æ˜]\n\né¦–æ¬¡æç°éœ€å®Œæˆèº«ä»½éªŒè¯ï¼Œè¯·ç¡®ä¿æç°é“¶è¡Œå¡ä¸ºæœ¬äººå®åè´¦æˆ·ã€‚',
                category: 'æç°',
                followUp: []
            },
            {
                id: 9,
                keywords: ['å®‰å…¨', 'ä¿éšœ', 'éšç§', 'èµ„é‡‘', 'ä¿æŠ¤'],
                questions: ['èµ„é‡‘å®‰å…¨å—ï¼Ÿ', 'ä¸ªäººä¿¡æ¯å®‰å…¨å—', 'æœ‰ä»€ä¹ˆå®‰å…¨ä¿éšœ', 'å¦‚ä½•ä¿æŠ¤è´¦æˆ·å®‰å…¨'],
                answer: 'è…¾é¾™å¨±ä¹é«˜åº¦é‡è§†ç”¨æˆ·å®‰å…¨ï¼š\n\n1. èµ„é‡‘å®‰å…¨ï¼šé‡‡ç”¨é“¶è¡Œçº§åŠ å¯†æŠ€æœ¯ï¼Œèµ„é‡‘ç‹¬ç«‹å­˜ç®¡\n2. ä¿¡æ¯å®‰å…¨ï¼šä¸¥æ ¼çš„æ•°æ®ä¿æŠ¤æªæ–½ï¼Œä¿éšœä¸ªäººä¿¡æ¯ä¸å¤–æ³„\n3. è´¦æˆ·å®‰å…¨ï¼šæ”¯æŒäºŒæ¬¡éªŒè¯ï¼Œå®šæœŸå¯†ç æ›´æ–°æé†’\n4. æ¸¸æˆå…¬å¹³ï¼šæ‰€æœ‰æ¸¸æˆå‡é€šè¿‡å›½é™…è®¤è¯ï¼Œç¡®ä¿å…¬å¹³æ€§\n\nå»ºè®®æ‚¨å®šæœŸæ›´æ”¹å¯†ç ï¼Œä¸ä¸ä»–äººåˆ†äº«è´¦æˆ·ä¿¡æ¯ï¼Œä»¥ä¿éšœè´¦æˆ·å®‰å…¨ã€‚',
                category: 'å®‰å…¨ä¿éšœ',
                followUp: []
            },
            {
                id: 10,
                keywords: ['VIP', 'ä¼šå‘˜', 'ç­‰çº§', 'ç‰¹æƒ', 'ç¦åˆ©'],
                questions: ['VIPæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ', 'ä¼šå‘˜ç­‰çº§', 'VIPæ€ä¹ˆå‡çº§', 'ä¼šå‘˜ç‰¹æƒ'],
                answer: 'è…¾é¾™å¨±ä¹VIPä¼šå‘˜ä½“ç³»ï¼š\n\n1. ç­‰çº§åˆ’åˆ†ï¼šå…±è®¾VIP1-VIP10åä¸ªç­‰çº§\n2. å‡çº§æ–¹å¼ï¼šé€šè¿‡æœ‰æ•ˆæŠ•æ³¨é¢ç´¯è®¡æˆ–ç›´æ¥å……å€¼å‡çº§\n3. VIPç‰¹æƒï¼š\n   - ä¸“å±å®¢æœ\n   - æ›´é«˜è¿”æ°´æ¯”ä¾‹\n   - ç”Ÿæ—¥ç¤¼é‡‘\n   - å‡çº§ç¤¼é‡‘\n   - ä¸“å±æ´»åŠ¨\n   - æç°å¿«é€Ÿå¤„ç†\n\nè¯¦ç»†çš„VIPæƒç›Šè¯·æŸ¥çœ‹ç½‘ç«™"VIPä¸“åŒº"é¡µé¢ã€‚',
                category: 'VIPä¼šå‘˜',
                followUp: []
            },
            {
                id: 11,
                keywords: ['æŠ•è¯‰', 'å»ºè®®', 'æ„è§', 'ä¸æ»¡', 'é—®é¢˜'],
                questions: ['æˆ‘è¦æŠ•è¯‰', 'æœåŠ¡ä¸æ»¡æ„', 'æ¸¸æˆæœ‰é—®é¢˜', 'æˆ‘æœ‰æ„è§åé¦ˆ'],
                answer: 'éå¸¸æŠ±æ­‰ç»™æ‚¨å¸¦æ¥ä¸ä¾¿ã€‚æˆ‘ä»¬éå¸¸é‡è§†æ‚¨çš„åé¦ˆï¼Œè¯·æ‚¨æä¾›å…·ä½“æƒ…å†µï¼ŒåŒ…æ‹¬è´¦å·ã€é—®é¢˜æè¿°ç­‰ä¿¡æ¯ï¼Œæˆ‘ä»¬ä¼šä¼˜å…ˆå¤„ç†æ‚¨çš„é—®é¢˜ã€‚\n\næ‚¨ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹æ¸ é“æ­£å¼æäº¤æŠ•è¯‰ï¼š\n\n1. å®¢æœçƒ­çº¿ï¼š[å®¢æœç”µè¯]\n2. æŠ•è¯‰é‚®ç®±ï¼š[shixinqiangx@gmail.com]\n\næˆ‘ä»¬æ‰¿è¯ºä¼šåœ¨24å°æ—¶å†…ç»™æ‚¨ç­”å¤ã€‚',
                category: 'æŠ•è¯‰å»ºè®®',
                followUp: []
            },
            {
                id: 12,
                keywords: ['è¿”æ°´', 'è¿”åˆ©', 'ä½£é‡‘', 'å›é¦ˆ', 'æ¯”ä¾‹'],
                questions: ['æœ‰è¿”æ°´å—ï¼Ÿ', 'è¿”æ°´æ¯”ä¾‹æ˜¯å¤šå°‘', 'æ€ä¹ˆæ‹¿è¿”æ°´', 'è¿”æ°´è§„åˆ™'],
                answer: 'è…¾é¾™å¨±ä¹æä¾›ä¸°åšçš„è¿”æ°´æ”¿ç­–ï¼š\n\n1. è¿”æ°´æ¯”ä¾‹ï¼š\n   - çœŸäººå¨±ä¹ï¼š0.6%-1.2%\n   - ä½“è‚²èµ›äº‹ï¼š0.6%-1.0%\n   - ç”µå­æ¸¸æˆï¼š0.8%-1.5%\n   - å½©ç¥¨æ¸¸æˆï¼š0.8%-1.2%\n   - æ£‹ç‰Œæ¸¸æˆï¼š0.6%-1.0%\n\n2. è¿”æ°´æ—¶é—´ï¼šæ¯æ—¥è‡ªåŠ¨ç»“ç®—ï¼Œæ¬¡æ—¥å‘æ”¾\n3. é¢†å–æ–¹å¼ï¼šç™»å½•è´¦æˆ· â†’ è¿›å…¥"è¿”æ°´ä¸­å¿ƒ" â†’ ç‚¹å‡»é¢†å–\n\nVIPä¼šå‘˜å¯äº«å—æ›´é«˜è¿”æ°´æ¯”ä¾‹ï¼Œè¯¦æƒ…è¯·å’¨è¯¢å®¢æœã€‚',
                category: 'è¿”æ°´æ”¿ç­–',
                followUp: []
            },
            {
                id: 13,
                keywords: ['è°¢è°¢', 'æ„Ÿè°¢', 'å¤šè°¢', 'å†è§', 'æ‹œæ‹œ', 'ä¸ç”¨äº†'],
                questions: ['è°¢è°¢ä½ ', 'æ„Ÿè°¢å¸®åŠ©', 'å†è§', 'æ‹œæ‹œ', 'ä¸ç”¨äº†'],
                answer: 'ä¸å®¢æ°”ï¼å¾ˆé«˜å…´èƒ½å¸®åˆ°æ‚¨ã€‚å¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œéšæ—¶æ¬¢è¿å’¨è¯¢ã€‚ç¥æ‚¨æ¸¸æˆæ„‰å¿«ï¼Œå¥½è¿å¸¸ä¼´ï¼',
                category: 'ç»“æŸè¯­',
                followUp: []
            },
            {
                id: 14,
                keywords: ['äººå·¥', 'çœŸäºº', 'å®¢æœ', 'è½¬äººå·¥', 'äººå·¥æœåŠ¡'],
                questions: ['è½¬äººå·¥', 'æˆ‘è¦äººå·¥å®¢æœ', 'è¿æ¥çœŸäºº', 'æœºå™¨äººæ²¡ç”¨'],
                answer: 'å¥½çš„ï¼Œæˆ‘ç†è§£æ‚¨éœ€è¦æ›´ä¸“ä¸šçš„å¸®åŠ©ã€‚æˆ‘ä»¬çš„äººå·¥å®¢æœ7x24å°æ—¶ä¸ºæ‚¨æœåŠ¡ã€‚æ‚¨å¯ä»¥ï¼š\n\n1. æ‹¨æ‰“å®¢æœçƒ­çº¿ï¼š[09662348273]\n2. å‘é€é‚®ä»¶è‡³ï¼š[shixinqiangx@gmail.com]\n3. ç‚¹å‡»ç½‘ç«™å³ä¸‹è§’"åœ¨çº¿å®¢æœ"æŒ‰é’®\n\nè¯·æä¾›æ‚¨çš„é—®é¢˜æè¿°å’Œè´¦å·ä¿¡æ¯(å¦‚æœ‰)ï¼Œä»¥ä¾¿æˆ‘ä»¬æ›´å¥½åœ°ä¸ºæ‚¨æœåŠ¡ã€‚',
                category: 'äººå·¥å®¢æœ',
                followUp: []
            }
        ];

        // DOMå…ƒç´ 
        const chatbotContainer = document.getElementById('chatbot-container');
        const chatBubble = document.getElementById('chat-bubble');
        const chatHeader = document.getElementById('chat-header');
        const minimizeBtn = document.getElementById('minimize-btn');
        const chatBody = document.getElementById('chat-body');
        const chatInput = document.getElementById('chat-input');
        const sendBtn = document.getElementById('send-btn');

        // èŠå¤©çŠ¶æ€
        let chatHistory = [];
        let isTyping = false;

        // åˆå§‹åŒ–
        function initChatbot() {
            // ç‚¹å‡»æ°”æ³¡å±•å¼€èŠå¤©çª—å£
            chatBubble.addEventListener('click', expandChatbot);
            
            // ç‚¹å‡»æœ€å°åŒ–æŒ‰é’®
            minimizeBtn.addEventListener('click', minimizeChatbot);
            
            // å‘é€æ¶ˆæ¯
            sendBtn.addEventListener('click', sendMessage);
            
            // è¾“å…¥æ¡†äº‹ä»¶
            chatInput.addEventListener('input', handleInput);
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });

            // æ·»åŠ æ¬¢è¿æ¶ˆæ¯
            setTimeout(() => {
                addBotMessage(knowledgeBase[0].answer);
                addQuickReplies([2, 3, 4]);
            }, 500);
        }

        // å±•å¼€èŠå¤©çª—å£
        function expandChatbot() {
            chatbotContainer.classList.remove('minimized');
            document.querySelector('.unread-indicator').classList.add('hidden');
            chatInput.focus();
        }

        // æœ€å°åŒ–èŠå¤©çª—å£
        function minimizeChatbot(e) {
            e.stopPropagation();
            chatbotContainer.classList.add('minimized');
        }

        // å¤„ç†è¾“å…¥æ¡†å˜åŒ–
        function handleInput() {
            sendBtn.disabled = chatInput.value.trim() === '';
        }

        // å‘é€æ¶ˆæ¯
        function sendMessage() {
            const message = chatInput.value.trim();
            if (message === '') return;
            
            // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
            addUserMessage(message);
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            chatInput.value = '';
            sendBtn.disabled = true;
            
            // æ˜¾ç¤ºæœºå™¨äººæ­£åœ¨è¾“å…¥
            showTypingIndicator();
            
            // å¤„ç†å›å¤
            setTimeout(() => {
                processUserMessage(message);
                hideTypingIndicator();
            }, 1000);
        }

        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
        function addUserMessage(message) {
            const messageElement = document.createElement('div');
            messageElement.className = 'message user-message';
            messageElement.textContent = message;
            
            chatBody.appendChild(messageElement);
            scrollToBottom();
            
            // æ·»åŠ åˆ°èŠå¤©å†å²
            chatHistory.push({
                sender: 'user',
                message: message
            });
        }

        // æ·»åŠ æœºå™¨äººæ¶ˆæ¯
        function addBotMessage(message) {
            const messageElement = document.createElement('div');
            messageElement.className = 'message bot-message';
            
            // æ”¯æŒæ¢è¡Œç¬¦
            messageElement.innerHTML = message.replace(/\n/g, '<br>');
            
            chatBody.appendChild(messageElement);
            scrollToBottom();
            
            // æ·»åŠ åˆ°èŠå¤©å†å²
            chatHistory.push({
                sender: 'bot',
                message: message
            });
            
            // å¦‚æœèŠå¤©çª—å£æ˜¯æœ€å°åŒ–çš„ï¼Œæ˜¾ç¤ºæœªè¯»æç¤º
            if (chatbotContainer.classList.contains('minimized')) {
                const unreadIndicator = document.querySelector('.unread-indicator');
                unreadIndicator.textContent = '1';
                unreadIndicator.classList.remove('hidden');
            }
        }

        // æ·»åŠ å¿«æ·å›å¤æŒ‰é’®
        function addQuickReplies(questionIds) {
            if (!questionIds || questionIds.length === 0) return;
            
            const quickRepliesContainer = document.createElement('div');
            quickRepliesContainer.className = 'quick-replies';
            
            questionIds.forEach(id => {
                const question = knowledgeBase.find(item => item.id === id);
                if (question) {
                    const button = document.createElement('button');
                    button.className = 'quick-reply-btn';
                    button.textContent = question.questions[0];
                    button.addEventListener('click', () => {
                        // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
                        addUserMessage(question.questions[0]);
                        
                        // æ˜¾ç¤ºæœºå™¨äººæ­£åœ¨è¾“å…¥
                        showTypingIndicator();
                        
                        // å¤„ç†å›å¤
                        setTimeout(() => {
                            addBotMessage(question.answer);
                            hideTypingIndicator();
                            
                            // æ·»åŠ åç»­é—®é¢˜çš„å¿«æ·å›å¤
                            if (question.followUp && question.followUp.length > 0) {
                                addQuickReplies(question.followUp);
                            }
                        }, 1000);
                    });
                    
                    quickRepliesContainer.appendChild(button);
                }
            });
            
            chatBody.appendChild(quickRepliesContainer);
            scrollToBottom();
        }

        // æ˜¾ç¤ºæ­£åœ¨è¾“å…¥æŒ‡ç¤ºå™¨
        function showTypingIndicator() {
            if (isTyping) return;
            
            isTyping = true;
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'typing-indicator';
            typingIndicator.id = 'typing-indicator';
            
            for (let i = 0; i < 3; i++) {
                const dot = document.createElement('div');
                dot.className = 'typing-dot';
                typingIndicator.appendChild(dot);
            }
            
            chatBody.appendChild(typingIndicator);
            scrollToBottom();
        }

        // éšè—æ­£åœ¨è¾“å…¥æŒ‡ç¤ºå™¨
        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            isTyping = false;
        }

        // å¤„ç†ç”¨æˆ·æ¶ˆæ¯
        function processUserMessage(message) {
            // æŸ¥æ‰¾æœ€åŒ¹é…çš„å›ç­”
            const response = findBestResponse(message);
            
            // æ·»åŠ æœºå™¨äººå›å¤
            addBotMessage(response.answer);
            
            // æ·»åŠ åç»­é—®é¢˜çš„å¿«æ·å›å¤
            if (response.followUp && response.followUp.length > 0) {
                addQuickReplies(response.followUp);
            }
        }

        // æŸ¥æ‰¾æœ€ä½³å›ç­”
        function findBestResponse(message) {
            // è½¬æ¢ä¸ºå°å†™ä»¥è¿›è¡Œä¸åŒºåˆ†å¤§å°å†™çš„åŒ¹é…
            const lowerMessage = message.toLowerCase();
            
            // é¦–å…ˆæ£€æŸ¥å®Œå…¨åŒ¹é…çš„é—®é¢˜
            for (const item of knowledgeBase) {
                for (const question of item.questions) {
                    if (lowerMessage === question.toLowerCase()) {
                        return item;
                    }
                }
            }
            
            // ç„¶åæ£€æŸ¥å…³é”®è¯åŒ¹é…
            let bestMatch = null;
            let highestScore = 0;
            
            for (const item of knowledgeBase) {
                let score = 0;
                
                // è®¡ç®—å…³é”®è¯åŒ¹é…åˆ†æ•°
                for (const keyword of item.keywords) {
                    if (lowerMessage.includes(keyword.toLowerCase())) {
                        score += 1;
                    }
                }
                
                if (score > highestScore) {
                    highestScore = score;
                    bestMatch = item;
                }
            }
            
            // å¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œè¿”å›å®ƒ
            if (bestMatch && highestScore > 0) {
                return bestMatch;
            }
            
            // å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…é¡¹ï¼Œè¿”å›é»˜è®¤å›å¤æˆ–è½¬äººå·¥
            return knowledgeBase.find(item => item.id === 14) || {
                answer: "æŠ±æ­‰ï¼Œæˆ‘ä¸å¤ªç†è§£æ‚¨çš„é—®é¢˜ã€‚è¯·å°è¯•æ¢ä¸€ç§æ–¹å¼æé—®ï¼Œæˆ–è”ç³»æˆ‘ä»¬çš„äººå·¥å®¢æœè·å–å¸®åŠ©ã€‚",
                followUp: []
            };
        }

        // æ»šåŠ¨åˆ°åº•éƒ¨
        function scrollToBottom() {
            chatBody.scrollTop = chatBody.scrollHeight;
        }

        // åˆå§‹åŒ–èŠå¤©æœºå™¨äºº
        document.addEventListener('DOMContentLoaded', initChatbot);
    </script>

    <!-- æ¼”ç¤ºé¡µé¢å†…å®¹ -->
    <div style="max-width: 800px; margin: 50px auto; padding: 20px; text-align: center;">
        <h1>è…¾é¾™å¨±ä¹å®¢æœæœºå™¨äººæ¼”ç¤º</h1>
        <p style="margin: 20px 0; font-size: 18px; color: #666;">
            è¿™æ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„è…¾é¾™å¨±ä¹å®¢æœæœºå™¨äººé¡µé¢ã€‚ç‚¹å‡»å³ä¸‹è§’çš„èŠå¤©å›¾æ ‡äº†è§£è…¾é¾™å¨±ä¹ã€‚
        </p>
        <div style="margin: 40px 0; padding: 20px; background-color: #f5f5f5; border-radius: 8px; text-align: left;">
            <h2 style="margin-bottom: 15px;">å®¢æœæœºå™¨äººåŠŸèƒ½ï¼š</h2>
            <ul style="list-style-type: disc; padding-left: 20px; line-height: 1.8;">
                <li>è‡ªåŠ¨å›ç­”å¸¸è§é—®é¢˜</li>
                <li>æä¾›å¿«æ·å›å¤é€‰é¡¹</li>
                <li>æ”¯æŒå¤šè½®å¯¹è¯</li>
                <li>å“åº”å¼è®¾è®¡ï¼Œé€‚é…ç§»åŠ¨è®¾å¤‡</li>
                <li>æ‰“å­—åŠ¨ç”»æ•ˆæœ</li>
                <li>æœªè¯»æ¶ˆæ¯æç¤º</li>
                <li>å¯æœ€å°åŒ–/å±•å¼€çš„ç•Œé¢</li>
            </ul>
        </div>
        <p style="color: #888;">
            æ‚¨å¯ä»¥å°è¯•è¯¢é—®å…³äºæ¸¸æˆã€å……å€¼ã€æç°ã€ä¼˜æƒ æ´»åŠ¨ç­‰é—®é¢˜ã€‚
        </p>
    </div>
</body>
</html>
